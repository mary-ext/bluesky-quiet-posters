var Ke=Object.defineProperty;var We=(e,s,t)=>s in e?Ke(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var D=(e,s,t)=>(We(e,typeof s!="symbol"?s+"":s,t),t),oe=(e,s,t)=>{if(!s.has(e))throw TypeError("Cannot "+t)};var N=(e,s,t)=>(oe(e,s,"read from private field"),t?t.call(e):s.get(e)),C=(e,s,t)=>{if(s.has(e))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(e):s.set(e,t)},X=(e,s,t,n)=>(oe(e,s,"write to private field"),n?n.call(e,t):s.set(e,t),t);var A=(e,s,t)=>(oe(e,s,"access private method"),t);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const Xe=(e,s)=>e===s,Ze=Symbol("solid-track"),V={equals:Xe};let ze=Oe;const _=1,H=2,Me={owned:null,cleanups:null,context:null,owner:null};var p=null;let le=null,d=null,b=null,L=null,ne=0;function Z(e,s){const t=d,n=p,r=e.length===0,i=s===void 0?n:s,l=r?Me:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=r?e:()=>e(()=>Y(()=>ie(l)));p=l,d=null;try{return R(o,!0)}finally{d=t,p=n}}function fe(e,s){s=s?Object.assign({},V,s):V;const t={value:e,observers:null,observerSlots:null,comparator:s.equals||void 0},n=r=>(typeof r=="function"&&(r=r(t.value)),_e(t,r));return[Le.bind(t),n]}function ae(e,s,t){const n=ke(e,s,!1,_);re(n)}function Ve(e,s,t){t=t?Object.assign({},V,t):V;const n=ke(e,s,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,re(n),Le.bind(n)}function Y(e){if(d===null)return e();const s=d;d=null;try{return e()}finally{d=s}}function He(e){return p===null||(p.cleanups===null?p.cleanups=[e]:p.cleanups.push(e)),e}function Le(){if(this.sources&&this.state)if(this.state===_)re(this);else{const e=b;b=null,R(()=>G(this),!1),b=e}if(d){const e=this.observers?this.observers.length:0;d.sources?(d.sources.push(this),d.sourceSlots.push(e)):(d.sources=[this],d.sourceSlots=[e]),this.observers?(this.observers.push(d),this.observerSlots.push(d.sources.length-1)):(this.observers=[d],this.observerSlots=[d.sources.length-1])}return this.value}function _e(e,s,t){let n=e.value;return(!e.comparator||!e.comparator(n,s))&&(e.value=s,e.observers&&e.observers.length&&R(()=>{for(let r=0;r<e.observers.length;r+=1){const i=e.observers[r],l=le&&le.running;l&&le.disposed.has(i),(l?!i.tState:!i.state)&&(i.pure?b.push(i):L.push(i),i.observers&&Pe(i)),l||(i.state=_)}if(b.length>1e6)throw b=[],new Error},!1)),s}function re(e){if(!e.fn)return;ie(e);const s=ne;Ge(e,e.value,s)}function Ge(e,s,t){let n;const r=p,i=d;d=p=e;try{n=e.fn(s)}catch(l){return e.pure&&(e.state=_,e.owned&&e.owned.forEach(ie),e.owned=null),e.updatedAt=t+1,Be(l)}finally{d=i,p=r}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?_e(e,n):e.value=n,e.updatedAt=t)}function ke(e,s,t,n=_,r){const i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:s,owner:p,context:p?p.context:null,pure:t};return p===null||p!==Me&&(p.owned?p.owned.push(i):p.owned=[i]),i}function Fe(e){if(e.state===0)return;if(e.state===H)return G(e);if(e.suspense&&Y(e.suspense.inFallback))return e.suspense.effects.push(e);const s=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ne);)e.state&&s.push(e);for(let t=s.length-1;t>=0;t--)if(e=s[t],e.state===_)re(e);else if(e.state===H){const n=b;b=null,R(()=>G(e,s[0]),!1),b=n}}function R(e,s){if(b)return e();let t=!1;s||(b=[]),L?t=!0:L=[],ne++;try{const n=e();return Qe(t),n}catch(n){t||(L=null),b=null,Be(n)}}function Qe(e){if(b&&(Oe(b),b=null),e)return;const s=L;L=null,s.length&&R(()=>ze(s),!1)}function Oe(e){for(let s=0;s<e.length;s++)Fe(e[s])}function G(e,s){e.state=0;for(let t=0;t<e.sources.length;t+=1){const n=e.sources[t];if(n.sources){const r=n.state;r===_?n!==s&&(!n.updatedAt||n.updatedAt<ne)&&Fe(n):r===H&&G(n,s)}}}function Pe(e){for(let s=0;s<e.observers.length;s+=1){const t=e.observers[s];t.state||(t.state=H,t.pure?b.push(t):L.push(t),t.observers&&Pe(t))}}function ie(e){let s;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const i=r.pop(),l=t.observerSlots.pop();n<r.length&&(i.sourceSlots[l]=n,r[n]=i,t.observerSlots[n]=l)}}if(e.owned){for(s=e.owned.length-1;s>=0;s--)ie(e.owned[s]);e.owned=null}if(e.cleanups){for(s=e.cleanups.length-1;s>=0;s--)e.cleanups[s]();e.cleanups=null}e.state=0}function et(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Be(e,s=p){throw et(e)}const tt=Symbol("fallback");function Se(e){for(let s=0;s<e.length;s++)e[s]()}function st(e,s,t={}){let n=[],r=[],i=[],l=0,o=s.length>1?[]:null;return He(()=>Se(i)),()=>{let f=e()||[],a,c;return f[Ze],Y(()=>{let u=f.length,g,w,E,U,S,m,v,y,x;if(u===0)l!==0&&(Se(i),i=[],n=[],r=[],l=0,o&&(o=[])),t.fallback&&(n=[tt],r[0]=Z($=>(i[0]=$,t.fallback())),l=1);else if(l===0){for(r=new Array(u),c=0;c<u;c++)n[c]=f[c],r[c]=Z(h);l=u}else{for(E=new Array(u),U=new Array(u),o&&(S=new Array(u)),m=0,v=Math.min(l,u);m<v&&n[m]===f[m];m++);for(v=l-1,y=u-1;v>=m&&y>=m&&n[v]===f[y];v--,y--)E[y]=r[v],U[y]=i[v],o&&(S[y]=o[v]);for(g=new Map,w=new Array(y+1),c=y;c>=m;c--)x=f[c],a=g.get(x),w[c]=a===void 0?-1:a,g.set(x,c);for(a=m;a<=v;a++)x=n[a],c=g.get(x),c!==void 0&&c!==-1?(E[c]=r[a],U[c]=i[a],o&&(S[c]=o[a]),c=w[c],g.set(x,c)):i[a]();for(c=m;c<u;c++)c in E?(r[c]=E[c],i[c]=U[c],o&&(o[c]=S[c],o[c](c))):r[c]=Z(h);r=r.slice(0,l=u),n=f.slice(0)}return r});function h(u){if(i[c]=u,o){const[g,w]=fe(c);return o[c]=w,s(f[c],g)}return s(f[c])}}}function Te(e,s){return Y(()=>e(s||{}))}function nt(e){const s="fallback"in e&&{fallback:()=>e.fallback};return Ve(st(()=>e.each,e.children,s||void 0))}function rt(e,s,t){let n=t.length,r=s.length,i=n,l=0,o=0,f=s[r-1].nextSibling,a=null;for(;l<r||o<i;){if(s[l]===t[o]){l++,o++;continue}for(;s[r-1]===t[i-1];)r--,i--;if(r===l){const c=i<n?o?t[o-1].nextSibling:t[i-o]:f;for(;o<i;)e.insertBefore(t[o++],c)}else if(i===o)for(;l<r;)(!a||!a.has(s[l]))&&s[l].remove(),l++;else if(s[l]===t[i-1]&&t[o]===s[r-1]){const c=s[--r].nextSibling;e.insertBefore(t[o++],s[l++].nextSibling),e.insertBefore(t[--i],c),s[r]=t[i]}else{if(!a){a=new Map;let h=o;for(;h<i;)a.set(t[h],h++)}const c=a.get(s[l]);if(c!=null)if(o<c&&c<i){let h=l,u=1,g;for(;++h<r&&h<i&&!((g=a.get(s[h]))==null||g!==c+u);)u++;if(u>c-o){const w=s[l];for(;o<c;)e.insertBefore(t[o++],w)}else e.replaceChild(t[o++],s[l++])}else l++;else s[l++].remove()}}}function it(e,s,t,n={}){let r;return Z(i=>{r=i,s===document?e():O(s,e(),s.firstChild?null:void 0,t)},n.owner),()=>{r(),s.textContent=""}}function Je(e,s,t){let n;const r=()=>{const l=document.createElement("template");return l.innerHTML=e,t?l.content.firstChild.firstChild:l.content.firstChild},i=s?()=>Y(()=>document.importNode(n||(n=r()),!0)):()=>(n||(n=r())).cloneNode(!0);return i.cloneNode=i,i}function xe(e,s,t){t==null?e.removeAttribute(s):e.setAttribute(s,t)}function O(e,s,t,n){if(t!==void 0&&!n&&(n=[]),typeof s!="function")return Q(e,s,n,t);ae(r=>Q(e,s(),r,t),n)}function Q(e,s,t,n,r){for(;typeof t=="function";)t=t();if(s===t)return t;const i=typeof s,l=n!==void 0;if(e=l&&t[0]&&t[0].parentNode||e,i==="string"||i==="number")if(i==="number"&&(s=s.toString()),l){let o=t[0];o&&o.nodeType===3?o.data=s:o=document.createTextNode(s),t=F(e,t,n,o)}else t!==""&&typeof t=="string"?t=e.firstChild.data=s:t=e.textContent=s;else if(s==null||i==="boolean")t=F(e,t,n);else{if(i==="function")return ae(()=>{let o=s();for(;typeof o=="function";)o=o();t=Q(e,o,t,n)}),()=>t;if(Array.isArray(s)){const o=[],f=t&&Array.isArray(t);if(ue(o,s,t,r))return ae(()=>t=Q(e,o,t,n,!0)),()=>t;if(o.length===0){if(t=F(e,t,n),l)return t}else f?t.length===0?Ce(e,o,n):rt(e,t,o):(t&&F(e),Ce(e,o));t=o}else if(s.nodeType){if(Array.isArray(t)){if(l)return t=F(e,t,n,s);F(e,t,null,s)}else t==null||t===""||!e.firstChild?e.appendChild(s):e.replaceChild(s,e.firstChild);t=s}}return t}function ue(e,s,t,n){let r=!1;for(let i=0,l=s.length;i<l;i++){let o=s[i],f=t&&t[i],a;if(!(o==null||o===!0||o===!1))if((a=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))r=ue(e,o,f)||r;else if(a==="function")if(n){for(;typeof o=="function";)o=o();r=ue(e,Array.isArray(o)?o:[o],Array.isArray(f)?f:[f])||r}else e.push(o),r=!0;else{const c=String(o);f&&f.nodeType===3&&f.data===c?e.push(f):e.push(document.createTextNode(c))}}return r}function Ce(e,s,t=null){for(let n=0,r=s.length;n<r;n++)e.insertBefore(s[n],t)}function F(e,s,t,n){if(t===void 0)return e.textContent="";const r=n||document.createTextNode("");if(s.length){let i=!1;for(let l=s.length-1;l>=0;l--){const o=s[l];if(r!==o){const f=o.parentNode===e;!i&&!l?f?e.replaceChild(r,o):e.insertBefore(r,t):f&&o.remove()}else i=!0}}else e.insertBefore(r,t);return[r]}var M;class ot{constructor(){C(this,M,void 0)}on(s,t){let n,r;n=N(this,M),n===void 0?n=X(this,M,Object.create(null)):r=n[s],r===void 0?n[s]=t:typeof r=="function"?n[s]=[r,t]:r.push(t)}off(s,t){const n=N(this,M);if(n===void 0)return;const r=n[s];if(r!=null){if(r===t)delete n[s];else if(typeof r!="function"){const i=r.indexOf(t);i!==-1&&(r.length===2?n[s]=r[i===0?1:0]:r.splice(i,1))}}}emit(s,...t){const n=N(this,M);if(n===void 0)return;const r=n[s];if(r!==void 0)if(typeof r=="function")r.apply(this,t);else{const i=r.slice();for(let l=0,o=i.length;l<o;l++)i[l].apply(this,t)}}}M=new WeakMap;const lt=e=>decodeURIComponent(atob(e).replace(/(.)/g,(s,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})),ct=e=>{var s=e.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return lt(s)}catch{return atob(s)}},Ee=e=>{const t=e.split(".")[1];let n;if(typeof t!="string")throw new Error("invalid token: missing part 2");try{n=ct(t)}catch(r){throw new Error("invalid token: invalid b64 for part 2 ("+r.message+")")}try{return JSON.parse(n)}catch(r){throw new Error("invalid token: invalid json for part 2 ("+r.message+")")}},Ue=new TextEncoder,Ie=new TextDecoder;class ft{constructor(s,t){D(this,"success",!0);this.data=s,this.headers=t}}class B extends Error{constructor(t,n,r){super(r||n);D(this,"success",!1);this.status=t,this.error=n,this.name="XRPCError"}}var K=(e=>(e[e.Unknown=1]="Unknown",e[e.InvalidResponse=2]="InvalidResponse",e[e.Success=200]="Success",e[e.InvalidRequest=400]="InvalidRequest",e[e.AuthRequired=401]="AuthRequired",e[e.Forbidden=403]="Forbidden",e[e.XRPCNotSupported=404]="XRPCNotSupported",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.RateLimitExceeded=429]="RateLimitExceeded",e[e.InternalServerError=500]="InternalServerError",e[e.MethodNotImplemented=501]="MethodNotImplemented",e[e.UpstreamFailure=502]="UpstreamFailure",e[e.NotEnoughResouces=503]="NotEnoughResouces",e[e.UpstreamTimeout=504]="UpstreamTimeout",e))(K||{});const je=e=>e in K?e:e>=100&&e<200?404:e>=200&&e<300?200:e>=300&&e<400?404:e>=400&&e<500?400:500,at=(e,s,t)=>{const n=new URL(`/xrpc/${e}`,s);if(t)for(const r in t){const i=t[r];if(i!==void 0)if(Array.isArray(i))for(let l=0,o=i.length;l<o;l++){const f=i[l];n.searchParams.append(r,f)}else n.searchParams.set(r,i)}return n.toString()},ut=(e,s,t,n)=>(s==="post"&&(t&&typeof t=="object"&&(e["Content-Type"]||(e["Content-Type"]="application/json")),n&&(e["Content-Type"]=n)),e),ht=(e,s)=>{if(!(!e["Content-Type"]||typeof s>"u"))return s instanceof ArrayBuffer||s instanceof Blob?s:e["Content-Type"].startsWith("text/")?Ue.encode(s.toString()):e["Content-Type"].startsWith("application/json")?Ue.encode(JSON.stringify(s)):s},dt=(e,s)=>{if(e){if(e.includes("application/json")&&(s!=null&&s.byteLength))try{const t=Ie.decode(s);return JSON.parse(t)}catch(t){throw new B(2,`Failed to parse response body: ${String(t)}`)}if(e.startsWith("text/")&&(s!=null&&s.byteLength))try{return Ie.decode(s)}catch(t){throw new B(2,`Failed to parse response body: ${String(t)}`)}}return s instanceof ArrayBuffer?new Uint8Array(s):s},he=(e,s)=>{if(!e)return!1;const t=typeof e.error,n=typeof e.message;return(t==="undefined"||t==="string")&&(n==="undefined"||n==="string")&&(!s||s.includes(e.error))},qe=async(e,s,t,n,r)=>{try{const i={signal:r,method:s,headers:t,body:ht(t,n),duplex:"half"},l=await fetch(e,i),o=await l.arrayBuffer();return{status:l.status,headers:Object.fromEntries(l.headers.entries()),body:dt(l.headers.get("content-type"),o)}}catch(i){throw new B(K.Unknown,String(i))}};var T,de;class pt{constructor(s,t=qe){C(this,T);this.serviceUri=s,this.fetch=t}get(s,t){return A(this,T,de).call(this,{type:"get",method:s,...t})}call(s,t){return A(this,T,de).call(this,{type:"post",method:s,...t})}}T=new WeakSet,de=async function(s){const{type:t,method:n,params:r,data:i,encoding:l,headers:o={},signal:f}=s,a=at(n,this.serviceUri,r),c=ut(o,t,i,l),h=await this.fetch(a,t,c,i,f),u=je(h.status);if(u===K.Success)return new ft(h.body,h.headers);throw h.body&&he(h.body)?new B(u,h.body.error,h.body.message):new B(u)};var I,te,Ye,J,pe,j,ge,se,Re,P,z,q,we;class gt extends ot{constructor(t){super();C(this,te);C(this,J);C(this,j);C(this,se);C(this,P);C(this,q);D(this,"rpc");D(this,"fetch");D(this,"serviceUri");D(this,"session");C(this,I,void 0);this.fetch=t.fetch??qe,this.serviceUri=t.serviceUri,this.rpc=new pt(this.serviceUri),this.rpc.fetch=A(this,te,Ye).bind(this)}async login(t){A(this,P,z).call(this);const n=await this.rpc.call("com.atproto.server.createSession",{data:{identifier:t.identifier,password:t.password}});return A(this,q,we).call(this,n.data)}async resumeSession(t){const n=Date.now()/1e3+300,r=Ee(t.refreshJwt);if(n>=r.exp)throw new Error("INVALID_TOKEN");const i=Ee(t.accessJwt);if(A(this,P,z).call(this,t),n>=i.exp&&await A(this,j,ge).call(this),!this.session)throw new Error("INVALID_TOKEN");return this.session}}I=new WeakMap,te=new WeakSet,Ye=async function(t,n,r,i,l){var f;await N(this,I);let o=await this.fetch(t,n,A(this,J,pe).call(this,r),i,l);return he(o.body,["ExpiredToken"])&&((f=this.session)!=null&&f.refreshJwt)&&(await A(this,j,ge).call(this),this.session&&(o=await this.fetch(t,n,A(this,J,pe).call(this,r),i,l))),o},J=new WeakSet,pe=function(t){const n=this.session;return!t.authorization&&n?{...t,authorization:`Bearer ${n.accessJwt}`}:t},j=new WeakSet,ge=async function(){if(N(this,I))return N(this,I);X(this,I,A(this,se,Re).call(this));try{await N(this,I)}finally{X(this,I,void 0)}},se=new WeakSet,Re=async function(){const t=this.session;if(!t||!t.refreshJwt)return;const n=new URL("/xrpc/com.atproto.server.refreshSession",t.pdsUri||this.serviceUri),r=await this.fetch(n.toString(),"POST",{authorization:`Bearer ${t.refreshJwt}`},void 0,void 0);he(r.body,["ExpiredToken","InvalidToken"])?(A(this,P,z).call(this),this.emit("sessionExpired")):je(r.status)===K.Success&&(A(this,q,we).call(this,r.body),this.emit("sessionUpdate",this.session))},P=new WeakSet,z=function(t){this.session=t,this.rpc.serviceUri=t&&t.pdsUri||this.serviceUri},q=new WeakSet,we=function(t){const n=t.didDoc;let r;return n&&(r=wt(n)),this.rpc.serviceUri=r||this.serviceUri,this.session={accessJwt:t.accessJwt,refreshJwt:t.refreshJwt,handle:t.handle,did:t.did,pdsUri:r,email:t.email,emailConfirmed:t.emailConfirmed}};const wt=e=>mt(e,"#atproto_pds","AtprotoPersonalDataServer"),mt=(e,s,t)=>{var l;const r=e.id+s,i=(l=e.service)==null?void 0:l.find(o=>o.id===s||o.id===r);if(!(!i||i.type!==t||typeof i.serviceEndpoint!="string"))return yt(i.serviceEndpoint)},yt=e=>{let s;try{s=new URL(e)}catch{return}const t=s.protocol;if(s.hostname&&(t==="http:"||t==="https:"))return e},me=1e3,ye=me*60,be=ye*60,ve=be*24,ee=ve*7,Ae=ee*4,Ne=Ae*12,bt=new Intl.DateTimeFormat("en-US",{dateStyle:"medium"}),vt=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}),ce={},At=(e,s=new Date)=>{const t=new Date(e),n=t.getTime(),r=Math.abs(n-s.getTime());if(r>ee)return t.getFullYear()===s.getFullYear()?vt.format(t):bt.format(t);const[i,l]=St(r);return(ce[l]||(ce[l]=new Intl.NumberFormat("en-US",{style:"unit",unit:l,unitDisplay:"narrow"}))).format(Math.abs(i))},St=e=>e<me?[0,"second"]:e<ye?[Math.trunc(e/me),"second"]:e<be?[Math.trunc(e/ye),"minute"]:e<ve?[Math.trunc(e/be),"hour"]:e<ee?[Math.trunc(e/ve),"day"]:e<Ae?[Math.trunc(e/ee),"week"]:e<Ne?[Math.trunc(e/Ae),"month"]:[Math.trunc(e/Ne),"year"],xt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='80'%20height='80'%20fill='none'%20viewBox='0%200%2024%2024'%3e%3ccircle%20cx='12'%20cy='12'%20r='12'%20fill='%230070ff'/%3e%3ccircle%20cx='12'%20cy='9.5'%20r='3.5'%20fill='%23fff'/%3e%3cpath%20fill='%23fff'%20d='M12.058%2022.784c-2.636%200-5.051-.948-6.921-2.522.53-2.274%203.397-4.012%206.853-4.012%203.504%200%206.401%201.786%206.874%204.107-1.854%201.517-4.224%202.427-6.806%202.427Z'/%3e%3c/svg%3e",Ct=Je('<div><h3>Bluesky quiet posters</h3><p>List of your follows sorted by least active</p><form class=input-form><input type=text name=handle required placeholder=example.bsky.social pattern=@?([a-zA-Z0-9\\-]+(?:\\.[a-zA-Z0-9\\-]+)*(?:\\.[a-zA-Z]+))|did:[a-z]+:[a-zA-Z0-9._\\-]+ title="Bluesky handle or DID"><button type=submit>Go!</button></form><hr><div class=message-info></div><div class=profile-list>'),Et=Je("<a target=_blank class=profile><img class=profile-avatar><div class=profile-info><p class=profile-name></p><div class=profile-subinfo><span class=profile-handle>@</span><span class=dot>Â·</span><span class=profile-activity>"),$e=new gt({serviceUri:"https://api.bsky.app"}),Ut=20,De=[],It=(e,s)=>(e.lastActivity??-1)-(s.lastActivity??-1),Nt=()=>{let e;const[s,t]=fe(),[n,r]=fe(De),i=async(o,f)=>{let a=[],c;do{t(`Retrieving your follows (${a.length} users)`);const g=(await $e.rpc.get("app.bsky.graph.getFollows",{signal:f,params:{actor:o,cursor:c}})).data;a=a.concat(g.follows),c=g.cursor}while(c!==void 0);let h=[];for(let u=0,g=a.length;u<g;u++){const w=a[u];t(`Retrieving @${w.handle} (${u+1}/${g})`);const U=(await $e.rpc.get("app.bsky.feed.getAuthorFeed",{signal:f,params:{actor:w.did,limit:Ut+1}})).data.feed,S=new Date;let m=0,v;for(let y=0,x=U.length;y<x;y++){const{post:$,reason:W}=U[y],k=new Date(W?W.indexedAt:$.indexedAt);S.getDate()===k.getDate()&&S.getMonth()===k.getMonth()&&S.getFullYear()===k.getFullYear()&&m++,v??(v=k.getTime())}h=h.concat({profile:w,activityCount:m,lastActivity:v}),h.sort(It),r(h)}t("Done.")},l=o=>{const f=new FormData(o.currentTarget);o.preventDefault();const a=f.get("handle").replace(/^@/,"");e==null||e.abort(),e=new AbortController;const c=e.signal;r(De),i(a,c).catch(h=>{c.aborted||t(`Oops, an error occured. ${h}`)})};return(()=>{const o=Ct(),f=o.firstChild,a=f.nextSibling,c=a.nextSibling,h=c.nextSibling,u=h.nextSibling,g=u.nextSibling;return c.addEventListener("submit",l),O(u,s),O(g,Te(nt,{get each(){return n()},children:({profile:w,lastActivity:E})=>{const U=`https://bsky.app/profile/${w.did}`;return(()=>{const S=Et(),m=S.firstChild,v=m.nextSibling,y=v.firstChild,x=y.nextSibling,$=x.firstChild;$.firstChild;const W=$.nextSibling,k=W.nextSibling;return xe(S,"href",U),xe(m,"src",w.avatar||xt),O(y,w.displayName||`@${w.handle}`),O($,w.handle,null),O(k,E!==void 0?At(E):"no activity"),S})()}})),o})()};it(()=>Te(Nt,{}),document.getElementById("root"));
